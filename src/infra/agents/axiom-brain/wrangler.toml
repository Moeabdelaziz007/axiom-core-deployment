name = "axiom-brain"
main = "src/index.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

[vars]
# Default to localhost for dev, overridden by secrets in prod
ORACLE_VM_ENDPOINT = "http://localhost:8000/rag"

# Secrets (Set these via `wrangler secret put`)
# GEMINI_API_KEY
# AXIOM_SECRET_KEY

# --- Agent Hissab Infrastructure ---

[[d1_databases]]
binding = "DB"
database_name = "axiom-production-db"
database_id = "f324c0fb-551b-43aa-8209-db92e991beef"

[[d1_databases]]
binding = "USER_DB"
database_name = "axiom-user-data"
database_id = "e80cff67-8dda-4e21-a5ca-cbbc1fae1ec8"

[[d1_databases]]
binding = "AGENT_DB"
database_name = "axiom-agent-state"
database_id = "a7aec48b-9bc5-4c13-8ae9-9825ce9bc20c"

[ai]
binding = "AI"

[[vectorize]]
binding = "VECTORIZE_INDEX"
index_name = "tax-rules-index"

[env.production]
name = "axiom-brain-production"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]
